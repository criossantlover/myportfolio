<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>kentaportfolio</title>
  <link rel="stylesheet" href="design.css" />
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- SFX Audio Elements -->
  <audio id="clickSound" src="mp3/click.mp3" preload="auto"></audio>
  <audio id="windowOpenSound" src="mp3/window-open.mp3" preload="auto"></audio>
  <audio id="itemHoverSound" src="mp3/hover.mp3" preload="auto"></audio>
</head>
<body>
<!-- Wimbow ZP Intro Screen -->
<div class="intro-screen" id="introScreen">
  <img src="img/bootlogo.png" alt="Wimbow ZP Starting..." class="intro-logo">
  <div class="intro-progress">
    <div class="intro-progress-bar"></div>
  </div>
</div>

<div class="clouds"></div>

<!-- Desktop Icons -->
<div class="icon aboutme-icon">
  <img src="img/about me.png" alt="About Me" tabindex="0"
    onclick="openWindow('aboutWindow'); this.blur();"
    onkeydown="if(event.key==='Enter'){openWindow('aboutWindow')}" />
</div>
<div class="icon project-icon">
  <img src="img/projects.png" alt="Projects" tabindex="0"
    onclick="openWindow('projectWindow'); this.blur();"
    onkeydown="if(event.key==='Enter'){openWindow('projectWindow')}" />
</div>
<div class="icon contact-icon">
  <img src="img/contacts.png" alt="Contact" tabindex="0"
    onclick="openWindow('contactWindow'); this.blur();"
    onkeydown="if(event.key==='Enter'){openWindow('contactWindow')}" />
</div>

<!-- About Window -->
<div class="window about-window" id="aboutWindow" aria-modal="true" role="dialog" tabindex="-1">
  <div class="title-bar">
    <div class="title-bar-text">About Me</div>
    <div class="title-bar-controls">
      <button aria-label="Close" onclick="closeWindow('aboutWindow')"></button>
    </div>
  </div>
  <div class="window-content">
    <div class="about-header">
      <img src="img/prof1.png" alt="Kenta's Pixel Profile" class="profile-pic">
      <div class="profile-name">Kent Joshua Escobar</div>
    </div>
    <div class="about-content">
      <p>Hi! I'm Kenta, a passionate IT student with a focus on software development, embedded systems, and interactive media. I love blending creativity with technology to build meaningful and user-friendly projects.</p>
      <h2>Skills</h2>
      <ul>
        <li>HTML/CSS</li>
        <li>JavaScript</li>
        <li>Godot</li>
        <li>Arduino</li>
      </ul>
      <h2>Hobbies</h2>
      <ul>
        <li>Singing</li>
        <li>Dancing</li>
        <li>Gymrat</li>
        <li>Reading Books</li>
        <li>Music</li>
      </ul>
      <h2>Education</h2>
      <p>Bachelor Science Of Information Technology</p>
      <p>(Currently Junior)</p>

      <h2>Personal Traits</h2>
      <ul>
        <li>Creative</li>
        <li>Critical Thinking</li>
        <li>Pogi</li>
        <li>Cute</li>
      </ul>
    </div>
  </div>
</div>

<!-- Projects Window (Medium size) -->
<div class="window projects-window" id="projectWindow" aria-modal="true" role="dialog" tabindex="-1">
  <div class="title-bar">
    <div class="title-bar-text">My Projects</div>
    <div class="title-bar-controls">
      <button aria-label="Close" onclick="closeWindow('projectWindow')"></button>
    </div>
  </div>
  <div class="window-content">
    <h2>Projects</h2>
    <div class="project">
      <img src="img/project1.png" alt="Project 1 Screenshot" style="width:100%;max-width:220px;display:block;margin-bottom:8px;border-radius:8px;">
      <h3>PUGON</h3>
      <p>A first person horror game i made with my college friends, currently developing the game for our exhibition in my school. </p>
      <p>soon to be released in GitHub. </p>
    </div>
    <div class="project">
      <img src="img/pj2.png" alt="Project 2 Screenshot" style="width:100%;max-width:220px;display:block;margin-bottom:8px;border-radius:8px;">
      <h3>Website Portfolio</h3>
      <p>My latest Portfolio Website as of now</p>
    </div>
    <h2>Tools</h2>
    <ul>
      <li>Godot 2d/3d</li>
      <li>Figma</li>
      <li>blender</li>
      <li>Audacity</li>
      <li>Libresprite</li>
    </ul>
    <h2>Development</h2>
    <ul>
      <li>Html/css</li>
      <li>JavaScript</li>
    </ul>
  </div>
</div>

<!-- Contact Window (Smaller size) -->
<div class="window contact-window" id="contactWindow" aria-modal="true" role="dialog" tabindex="-1">
  <div class="title-bar">
    <div class="title-bar-text">Contact Me</div>
    <div class="title-bar-controls">
      <button aria-label="Close" onclick="closeWindow('contactWindow')"></button>
    </div>
  </div>
  <div class="window-content contact-content">
    <h2>yepee mail!</h2>
    <p class="contact-message">
      You can reach out to me through email!<br>
      I'm only active in Gmail, so please direct message me through email!
    </p>
    <img src="img/stickman.png" alt="Stickman" class="contact-stickman">
    <p class="contact-email">
      email me at:<br>
      <a href="mailto:kentjoshua1899@gmail.com">kentjoshua1899@gmail.com</a>
    </p>
  </div>
</div>

<!-- Start Menu -->
<div class="start-menu" id="startMenu">
  <div class="start-menu-header">
    <img src="img/window7.png" alt="Windows Logo" class="start-menu-logo">
    <span class="pixel-text">Start</span>
  </div>
  <div class="start-menu-content">
    <div class="start-menu-item" onclick="window.open('https://facebook.com/kent.joshua.escobar', '_blank')">
      <img src="img/facebook.png" alt="Facebook">
      <span class="pixel-text">Facebook</span>
    </div>
    <div class="start-menu-item" onclick="window.open('https://discord.com/users/804733427785662476', '_blank')">
      <img src="img/discord.png" alt="Discord">
      <span class="pixel-text">Discord</span>
    </div>
    <div class="start-menu-item" onclick="window.open('https://github.com/criossantlover', '_blank')">
      <img src="img/github.png" alt="GitHub">
      <span class="pixel-text">GitHub</span>
    </div>
  </div>
  <div class="start-menu-footer pixel-text">
    <img src="img/proff.png" alt="User">
    <span>Kenta</span>
  </div>
</div>

<!-- Mobile Warning - Hidden by default -->
<div id="mobileWarning" class="mobile-warning">
  <div class="warning-content">
    <img src="img/warning-icon.png" alt="!" width="32">
    <p>For best experience, view on Desktop!</p>
    <button onclick="closeWarning()">OK</button>
  </div>
</div>

<footer>
  <div class="footer">
    <img src="img/window7.png" alt="Windows 7 Logo" title="Click to open menu">
    <!-- Music Player (SFX toggle removed) -->
    <div class="music-player">
      <audio id="bgMusic" loop>
        <source src="mp3/webbgmusic.mp3" type="audio/mpeg">
      </audio>
      <button class="music-toggle" onclick="toggleMusic()">
        <img src="img/music-off.png" alt="Music Toggle" id="musicIcon">
      </button>
    </div>
  </div>
</footer>

<script >
// ========================
// CORE VARIABLES
// ========================
let activeWindow = null;
let windowPositions = {};
let isMusicPlaying = true;
let bgMusic;
let musicIcon;
let musicStarted = false;

// ========================
// INITIALIZATION
// ========================
document.addEventListener('DOMContentLoaded', function() {
  // Play startup sound
  playSound('startupSound', 1);
  
  // Initialize components
  initIntro();
  initWindows();
  initStartMenu();
  initMusic();
  initSFX();
});

// ========================
// SOUND EFFECTS SYSTEM
// ========================
function initSFX() {
  // Add hover sounds to list items only
  document.querySelectorAll('.window-content ul li').forEach(item => {
    item.addEventListener('mouseenter', () => playSound('itemHoverSound', 0.3));
  });

  // Add click sounds to all buttons
  document.querySelectorAll('button').forEach(btn => {
    btn.addEventListener('click', () => playSound('clickSound'));
  });
}

function playSound(soundId, volume = 0.7) {
  const sound = document.getElementById(soundId);
  if (!sound) return;
  sound.volume = volume;
  sound.currentTime = 0;
  sound.play().catch(e => console.log(`${soundId} failed:`, e));
}

// ========================
// MUSIC PLAYER SYSTEM
// ========================
function initMusic() {
  bgMusic = document.getElementById('bgMusic');
  musicIcon = document.getElementById('musicIcon');
  
  if (bgMusic) {
    bgMusic.volume = 0.5;
    if (musicIcon) musicIcon.src = "img/music-on.png";
    setTimeout(tryPlayMusic, 2500);
  }
}

function tryPlayMusic() {
  if (!bgMusic || musicStarted) return;
  
  bgMusic.play()
    .then(() => musicStarted = true)
    .catch(() => {
      document.addEventListener('click', () => {
        bgMusic.play();
        if (musicIcon) musicIcon.src = "img/music-on.png";
      }, { once: true });
    });
}

function toggleMusic() {
  playSound('clickSound');
  if (!bgMusic || !musicIcon) return;
  
  if (isMusicPlaying) {
    bgMusic.pause();
    musicIcon.src = "img/music-off.png";
  } else {
    bgMusic.play().catch(console.error);
    musicIcon.src = "img/music-on.png";
  }
  isMusicPlaying = !isMusicPlaying;
}

// ========================
// WINDOW MANAGEMENT
// ========================
function openWindow(windowId) {
  playSound('windowOpenSound');
  const win = document.getElementById(windowId);
  if (!win) return;

  win.classList.remove('closing');
  
  const isMobile = window.innerWidth <= 768;
  let windowWidth, windowHeight;
  
  // Set different sizes based on window type
  if (win.classList.contains('about-window')) {
    windowWidth = isMobile ? window.innerWidth * 0.95 : 700;
    windowHeight = isMobile ? window.innerHeight * 0.8 : 600;
  } 
  else if (win.classList.contains('projects-window')) {
    windowWidth = isMobile ? window.innerWidth * 0.95 : 600;
    windowHeight = isMobile ? window.innerHeight * 0.8 : 500;
  }
  else if (win.classList.contains('contact-window')) {
    windowWidth = isMobile ? window.innerWidth * 0.95 : 500;
    windowHeight = isMobile ? window.innerHeight * 0.8 : 450;
  }
  else {
    // Default size if no specific class
    windowWidth = isMobile ? window.innerWidth * 0.95 : 500;
    windowHeight = isMobile ? window.innerHeight * 0.8 : 400;
  }
  
  const centerX = isMobile ? (window.innerWidth - windowWidth) / 2 : 
               windowPositions[windowId]?.x || (window.innerWidth - windowWidth) / 2;
  const centerY = isMobile ? 20 : 
               windowPositions[windowId]?.y || (window.innerHeight - windowHeight) / 2;

  win.style.width = `${windowWidth}px`;
  win.style.height = `${windowHeight}px`;
  win.style.display = 'block';
  win.style.left = `${centerX}px`;
  win.style.top = `${centerY}px`;
  win.style.zIndex = getHighestZIndex() + 1;

  windowPositions[windowId] = { x: centerX, y: centerY };
  bringToFront(windowId);
}

function closeWindow(windowId) {
  const win = document.getElementById(windowId);
  if (!win) return;

  win.classList.add('closing');
  setTimeout(() => {
    win.style.display = 'none';
    win.classList.remove('closing');
    if (activeWindow === windowId) activeWindow = null;
  }, 200);
}

function bringToFront(windowId) {
  const win = document.getElementById(windowId);
  if (!win) return;
  win.style.zIndex = getHighestZIndex() + 1;
  activeWindow = windowId;
}

function getHighestZIndex() {
  return Math.max(...[...document.querySelectorAll('.window')]
    .map(win => parseInt(win.style.zIndex) || 0));
}

function initWindows() {
  document.querySelectorAll('.window .title-bar').forEach(titleBar => {
    titleBar.addEventListener('mousedown', function(e) {
      e.preventDefault();
      const win = this.closest('.window');
      win.style.transition = 'none';
      
      const startX = e.clientX;
      const startY = e.clientY;
      const startLeft = parseInt(win.style.left) || 0;
      const startTop = parseInt(win.style.top) || 0;

      function moveWindow(e) {
        win.style.left = `${startLeft + e.clientX - startX}px`;
        win.style.top = `${startTop + e.clientY - startY}px`;
        windowPositions[win.id] = { 
          x: parseInt(win.style.left), 
          y: parseInt(win.style.top) 
        };
      }

      function stopMoving() {
        document.removeEventListener('mousemove', moveWindow);
        document.removeEventListener('mouseup', stopMoving);
        setTimeout(() => win.style.transition = 'all 0.2s ease', 10);
      }

      document.addEventListener('mousemove', moveWindow);
      document.addEventListener('mouseup', stopMoving);
      bringToFront(win.id);
    });
  });
}

// ========================
// START MENU SYSTEM
// ========================
function initStartMenu() {
  const startButton = document.querySelector('.footer img[src="img/window7.png"]');
  const startMenu = document.getElementById('startMenu');
  
  if (!startButton || !startMenu) return;

  startButton.addEventListener('click', function(e) {
    playSound('clickSound');
    e.stopPropagation();
    
    if (startMenu.style.display === 'block') {
      startMenu.classList.add('closing');
      setTimeout(() => {
        startMenu.style.display = 'none';
        startMenu.classList.remove('closing');
      }, 200);
    } else {
      // Reset position before showing
      startMenu.style.left = '';
      startMenu.style.transform = '';
      
      if (window.innerWidth <= 768) {
        startMenu.style.left = '50%';
        startMenu.style.transform = 'translateX(-50%)';
      }
      
      startMenu.style.display = 'block';
      startMenu.style.zIndex = getHighestZIndex() + 1;
    }
  });
}

  document.addEventListener('click', (e) => {
    if (!startMenu.contains(e.target) && !e.target.closest('.footer img[src="img/window7.png"]')) {
      startMenu.classList.add('closing');
      setTimeout(() => {
        startMenu.style.display = 'none';
        startMenu.classList.remove('closing');
      }, 200);
    }
  });


// ========================
// INTRO SCREEN SYSTEM
// ========================
function initIntro() {
  const introScreen = document.getElementById('introScreen');
  if (!introScreen) return;

  setTimeout(() => {
    introScreen.classList.add('hidden');
    setTimeout(() => introScreen.remove(), 500);
  }, 2000);
}

// Add to your existing JavaScript
window.addEventListener('resize', function() {
  const startMenu = document.getElementById('startMenu');
  if (window.innerWidth > 768 && startMenu.style.display === 'block') {
    startMenu.style.left = '';
    startMenu.style.transform = '';
  }
});

// Add to your existing JS
function checkMobile() {
  if (window.innerWidth <= 768) {
    document.getElementById('mobileWarning').style.display = 'block';
  }
}

function closeWarning() {
  document.getElementById('mobileWarning').style.display = 'none';
  localStorage.setItem('hideMobileWarning', 'true');
}

// On load
window.addEventListener('DOMContentLoaded', () => {
  if (window.innerWidth <= 768 && !localStorage.getItem('hideMobileWarning')) {
    setTimeout(() => {
      document.getElementById('mobileWarning').style.display = 'block';
    }, 3000);
  }
});
</script>
</body>
</html>
